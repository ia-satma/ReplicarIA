â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”’ PROTOCOLO DE VERIFICACIÃ“N OBLIGATORIA ğŸ”’
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

REGLA: NO PUEDES DECIR "IMPLEMENTADO" SIN EJECUTAR ESTAS PRUEBAS
REGLA: CADA PRUEBA DEBE MOSTRAR EL OUTPUT REAL, NO "DEBERÃA FUNCIONAR"
REGLA: SI UNA PRUEBA FALLA, ARREGLAR ANTES DE CONTINUAR

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CREAR ESTE ARCHIVO: server/tests/verificacion.py
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

```python
#!/usr/bin/env python3
"""
SCRIPT DE VERIFICACIÃ“N COMPLETA DEL SISTEMA
Ejecutar despuÃ©s de CADA cambio: python server/tests/verificacion.py
"""

import requests
import json
import sys
from datetime import datetime

BASE_URL = "http://localhost:5000"

class Colores:
    VERDE = '\033[92m'
    ROJO = '\033[91m'
    AMARILLO = '\033[93m'
    AZUL = '\033[94m'
    RESET = '\033[0m'
    BOLD = '\033[1m'

def ok(msg):
    print(f"{Colores.VERDE}âœ… PASS{Colores.RESET} - {msg}")
    return True

def fail(msg, detalle=""):
    print(f"{Colores.ROJO}âŒ FAIL{Colores.RESET} - {msg}")
    if detalle:
        print(f"   {Colores.AMARILLO}Detalle: {detalle}{Colores.RESET}")
    return False

def warn(msg):
    print(f"{Colores.AMARILLO}âš ï¸ WARN{Colores.RESET} - {msg}")

def header(titulo):
    print(f"\n{Colores.AZUL}{Colores.BOLD}{'='*60}")
    print(f" {titulo}")
    print(f"{'='*60}{Colores.RESET}\n")

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# TEST 1: HEALTH CHECK
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
def test_health():
    header("TEST 1: HEALTH CHECK")
    try:
        r = requests.get(f"{BASE_URL}/api/health", timeout=5)
        if r.status_code == 200:
            data = r.json()
            print(f"   Respuesta: {json.dumps(data, indent=2)}")
            return ok("Health check responde 200")
        else:
            return fail(f"Health check retorna {r.status_code}", r.text[:200])
    except Exception as e:
        return fail("Health check no accesible", str(e))

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# TEST 2: CHAT FACTURAR.IA
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
def test_chat_facturar():
    header("TEST 2: CHAT FACTURAR.IA")
    try:
        r = requests.post(
            f"{BASE_URL}/api/asistente-facturacion/chat",
            json={"message": "hola, Â¿quÃ© puedes hacer?"},
            timeout=30  # 30 segundos para respuesta de LLM
        )
        
        print(f"   Status: {r.status_code}")
        print(f"   Respuesta: {r.text[:500]}")
        
        if r.status_code == 200:
            data = r.json()
            # Verificar que hay respuesta real
            respuesta = data.get('response') or data.get('message') or data.get('text') or ''
            if len(respuesta) > 10:
                return ok(f"Chat responde con {len(respuesta)} caracteres")
            else:
                return fail("Chat responde pero sin contenido Ãºtil", f"Respuesta: {respuesta}")
        else:
            return fail(f"Chat retorna {r.status_code}", r.text[:300])
            
    except requests.exceptions.Timeout:
        return fail("Chat TIMEOUT despuÃ©s de 30 segundos")
    except Exception as e:
        return fail("Chat no accesible", str(e))

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# TEST 3: CREAR CLIENTE (sin razon_social)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
def test_crear_cliente():
    header("TEST 3: CREAR CLIENTE SIN RAZON_SOCIAL")
    try:
        # Intentar crear cliente con SOLO nombre
        r = requests.post(
            f"{BASE_URL}/api/clientes",
            json={
                "nombre": f"Cliente Test Verificacion {datetime.now().strftime('%H%M%S')}",
                "rfc": "XAXX010101000"
            },
            timeout=10
        )
        
        print(f"   Status: {r.status_code}")
        print(f"   Respuesta: {r.text[:500]}")
        
        if r.status_code in [200, 201]:
            data = r.json()
            if data.get('id') or data.get('success'):
                return ok("Cliente creado sin necesidad de razon_social")
            else:
                return fail("Respuesta 200 pero sin ID de cliente")
        elif r.status_code == 422:
            return fail("AÃºn requiere campos obligatorios", r.text[:200])
        else:
            return fail(f"Error {r.status_code}", r.text[:200])
            
    except Exception as e:
        return fail("Endpoint clientes no accesible", str(e))

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# TEST 4: ENDPOINT ONBOARDING/INVESTIGAR
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
def test_onboarding_investigar():
    header("TEST 4: ONBOARDING INVESTIGAR")
    try:
        r = requests.post(
            f"{BASE_URL}/api/onboarding/investigar",
            json={"sitio_web": "sat.gob.mx"},
            timeout=60  # Puede tardar si usa AI
        )
        
        print(f"   Status: {r.status_code}")
        print(f"   Respuesta: {r.text[:500]}")
        
        if r.status_code == 405:
            return fail("Endpoint NO EXISTE (405 Method Not Allowed)")
        elif r.status_code == 404:
            return fail("Endpoint NO EXISTE (404 Not Found)")
        elif r.status_code == 200:
            data = r.json()
            if data.get('success'):
                datos = data.get('datos', {})
                campos = len([k for k, v in datos.items() if v])
                return ok(f"Investigar funciona - {campos} campos auto-completados")
            else:
                return fail("Responde pero success=false", data.get('error', ''))
        else:
            return fail(f"Error {r.status_code}", r.text[:200])
            
    except requests.exceptions.Timeout:
        return fail("TIMEOUT despuÃ©s de 60 segundos")
    except Exception as e:
        return fail("Endpoint no accesible", str(e))

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# TEST 5: ESTADO DEL ACERVO
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
def test_estado_acervo():
    header("TEST 5: ESTADO DEL ACERVO")
    try:
        r = requests.get(f"{BASE_URL}/api/biblioteca/acervo/estado", timeout=10)
        
        print(f"   Status: {r.status_code}")
        print(f"   Respuesta: {r.text[:800]}")
        
        if r.status_code == 404:
            return fail("Endpoint NO EXISTE (404)")
        elif r.status_code == 200:
            data = r.json()
            if data.get('success'):
                agentes = data.get('agentes', [])
                progreso = data.get('progreso_global', 0)
                if len(agentes) >= 7:
                    return ok(f"Estado acervo funciona - {len(agentes)} agentes, {progreso}% progreso")
                elif len(agentes) > 0:
                    warn(f"Solo {len(agentes)} agentes configurados (esperados 7)")
                    return ok(f"Estado acervo funciona parcialmente")
                else:
                    return fail("Responde pero sin agentes configurados")
            else:
                return fail("Responde pero success=false", data.get('error', ''))
        else:
            return fail(f"Error {r.status_code}", r.text[:200])
            
    except Exception as e:
        return fail("Endpoint no accesible", str(e))

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# TEST 6: BIBLIOTECA CHAT
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
def test_biblioteca_chat():
    header("TEST 6: BIBLIOTECA CHAT")
    try:
        r = requests.post(
            f"{BASE_URL}/api/biblioteca/chat",
            json={"message": "Â¿quÃ© documentos necesito subir?"},
            timeout=30
        )
        
        print(f"   Status: {r.status_code}")
        print(f"   Respuesta: {r.text[:500]}")
        
        if r.status_code == 200:
            data = r.json()
            respuesta = data.get('response') or data.get('message') or ''
            if len(respuesta) > 20:
                return ok(f"Biblioteca chat funciona - {len(respuesta)} chars")
            else:
                return fail("Responde pero sin contenido Ãºtil")
        else:
            return fail(f"Error {r.status_code}", r.text[:200])
            
    except Exception as e:
        return fail("Endpoint no accesible", str(e))

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# TEST 7: REINGESTAR DOCUMENTO (si existe alguno)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
def test_reingestar():
    header("TEST 7: REINGESTAR DOCUMENTO")
    try:
        # Primero verificar si hay documentos
        r = requests.get(f"{BASE_URL}/api/biblioteca/stats", timeout=5)
        if r.status_code != 200:
            warn("No se puede verificar stats")
            return True  # No es crÃ­tico
            
        stats = r.json()
        total_docs = stats.get('total_documentos', 0)
        
        if total_docs == 0:
            warn("No hay documentos para probar reingestiÃ³n")
            return True
        
        # Probar endpoint de reingestar (con doc ID 1)
        r = requests.post(f"{BASE_URL}/api/biblioteca/documento/1/reingestar", timeout=60)
        
        print(f"   Status: {r.status_code}")
        print(f"   Respuesta: {r.text[:300]}")
        
        if r.status_code == 404:
            # Verificar si el endpoint existe pero el doc no
            if 'no encontrado' in r.text.lower() or 'not found' in r.text.lower():
                return ok("Endpoint existe (doc no encontrado es esperado)")
            return fail("Endpoint reingestar NO EXISTE")
        elif r.status_code == 200:
            return ok("Reingestar funciona")
        else:
            return fail(f"Error {r.status_code}", r.text[:200])
            
    except Exception as e:
        return fail("Error en test", str(e))

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# TEST 8: STATS DOCUMENTO
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
def test_stats_documento():
    header("TEST 8: STATS DE DOCUMENTO")
    try:
        r = requests.get(f"{BASE_URL}/api/biblioteca/documento/1/stats", timeout=10)
        
        print(f"   Status: {r.status_code}")
        print(f"   Respuesta: {r.text[:500]}")
        
        if r.status_code == 404:
            # Puede ser que no existe el doc o el endpoint
            if 'endpoint' in r.text.lower() or 'route' in r.text.lower():
                return fail("Endpoint stats NO EXISTE")
            else:
                return ok("Endpoint existe (doc 1 no encontrado es OK)")
        elif r.status_code == 200:
            data = r.json()
            if 'estadisticas' in data or 'chunks' in str(data):
                return ok("Stats documento funciona")
            else:
                return fail("Responde pero sin estadÃ­sticas")
        else:
            return fail(f"Error {r.status_code}")
            
    except Exception as e:
        return fail("Error en test", str(e))

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# EJECUTAR TODOS LOS TESTS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
def main():
    print(f"\n{Colores.BOLD}{'='*60}")
    print(" VERIFICACIÃ“N COMPLETA DEL SISTEMA REVISAR.IA")
    print(f" Fecha: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
    print(f"{'='*60}{Colores.RESET}")
    
    resultados = {
        'health': test_health(),
        'chat_facturar': test_chat_facturar(),
        'crear_cliente': test_crear_cliente(),
        'onboarding_investigar': test_onboarding_investigar(),
        'estado_acervo': test_estado_acervo(),
        'biblioteca_chat': test_biblioteca_chat(),
        'reingestar': test_reingestar(),
        'stats_documento': test_stats_documento(),
    }
    
    # Resumen
    header("RESUMEN DE VERIFICACIÃ“N")
    
    passed = sum(1 for v in resultados.values() if v)
    total = len(resultados)
    porcentaje = round((passed / total) * 100)
    
    for nombre, resultado in resultados.items():
        estado = f"{Colores.VERDE}âœ… PASS{Colores.RESET}" if resultado else f"{Colores.ROJO}âŒ FAIL{Colores.RESET}"
        print(f"   {nombre}: {estado}")
    
    print(f"\n   {Colores.BOLD}TOTAL: {passed}/{total} tests pasaron ({porcentaje}%){Colores.RESET}")
    
    # Determinar si estÃ¡ listo para demo
    criticos = ['health', 'chat_facturar', 'biblioteca_chat']
    criticos_ok = all(resultados.get(c, False) for c in criticos)
    
    if porcentaje >= 90 and criticos_ok:
        print(f"\n   {Colores.VERDE}{Colores.BOLD}ğŸ‰ SISTEMA LISTO PARA DEMO{Colores.RESET}")
        return 0
    elif porcentaje >= 70 and criticos_ok:
        print(f"\n   {Colores.AMARILLO}{Colores.BOLD}âš ï¸ SISTEMA PARCIALMENTE LISTO - FUNCIONALIDAD BÃSICA OK{Colores.RESET}")
        return 0
    else:
        print(f"\n   {Colores.ROJO}{Colores.BOLD}âŒ SISTEMA NO LISTO - ARREGLAR TESTS FALLIDOS{Colores.RESET}")
        return 1

if __name__ == "__main__":
    sys.exit(main())
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
INSTRUCCIONES PARA REPLIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DESPUÃ‰S DE CREAR EL ARCHIVO verificacion.py, EJECUTARLO:

```bash
python server/tests/verificacion.py
```

EL OUTPUT DEBE MOSTRAR ALGO COMO:

```
============================================================
 VERIFICACIÃ“N COMPLETA DEL SISTEMA REVISAR.IA
 Fecha: 2025-01-22 12:30:45
============================================================

============================================================
 TEST 1: HEALTH CHECK
============================================================

   Respuesta: {"status": "ok", "database": "connected"...}
âœ… PASS - Health check responde 200

============================================================
 TEST 2: CHAT FACTURAR.IA
============================================================

   Status: 200
   Respuesta: {"response": "Â¡Hola! Soy tu asistente de facturaciÃ³n..."}
âœ… PASS - Chat responde con 245 caracteres

... (mÃ¡s tests)

============================================================
 RESUMEN DE VERIFICACIÃ“N
============================================================

   health: âœ… PASS
   chat_facturar: âœ… PASS
   crear_cliente: âœ… PASS
   onboarding_investigar: âŒ FAIL
   estado_acervo: âŒ FAIL
   biblioteca_chat: âœ… PASS
   reingestar: âŒ FAIL
   stats_documento: âŒ FAIL

   TOTAL: 4/8 tests pasaron (50%)

   âŒ SISTEMA NO LISTO - ARREGLAR TESTS FALLIDOS
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PROTOCOLO OBLIGATORIO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PARA CADA FUNCIONALIDAD QUE IMPLEMENTES:

1. IMPLEMENTAR el cÃ³digo
2. EJECUTAR: python server/tests/verificacion.py
3. MOSTRAR el output COMPLETO del test
4. Si âŒ FAIL â†’ ARREGLAR antes de continuar
5. Si âœ… PASS â†’ Continuar con siguiente funcionalidad

NO SE PERMITE:
- Decir "implementado" sin mostrar output del test
- Saltar tests que fallan
- Modificar el script de verificaciÃ³n para que pase

SE REQUIERE:
- Output REAL de cada test
- Screenshot o copia del resultado
- Todos los tests crÃ­ticos en PASS antes de marcar como "listo"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TESTS CRÃTICOS (BLOQUEAN DEMO)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Estos DEBEN pasar para considerar el sistema listo:

1. âœ… health - El servidor responde
2. âœ… chat_facturar - El asistente de facturaciÃ³n funciona
3. âœ… biblioteca_chat - La biblioteca responde

TESTS IMPORTANTES (AFECTAN FUNCIONALIDAD):

4. âš ï¸ crear_cliente - Poder crear clientes
5. âš ï¸ estado_acervo - Ver quÃ© documentos faltan
6. âš ï¸ onboarding_investigar - Auto-completar datos

TESTS SECUNDARIOS (NICE TO HAVE):

7. ğŸ“Š reingestar - Reprocesar documentos
8. ğŸ“Š stats_documento - Ver estadÃ­sticas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
EJEMPLO DE FLUJO CORRECTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

REPLIT: "Voy a arreglar el chat de Facturar.IA"
REPLIT: *hace cambios en asistente_facturacion_routes.py*
REPLIT: "Ejecutando verificaciÃ³n..."

```
$ python server/tests/verificacion.py

============================================================
 TEST 2: CHAT FACTURAR.IA
============================================================

   Status: 200
   Respuesta: {"response": "Â¡Hola! Soy Facturar.IA, tu asistente..."}
âœ… PASS - Chat responde con 312 caracteres
```

REPLIT: "âœ… Chat Facturar.IA VERIFICADO - Test pasa con 312 caracteres de respuesta"

ESTO ES CORRECTO âœ…

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
EJEMPLO DE FLUJO INCORRECTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

REPLIT: "ImplementÃ© el endpoint de investigar"
REPLIT: "DeberÃ­a funcionar ahora"

ESTO ES INCORRECTO âŒ - NO MOSTRÃ“ OUTPUT DEL TEST

CORRECCIÃ“N:
REPLIT: *ejecuta python server/tests/verificacion.py*
REPLIT: *muestra output real del test*
REPLIT: "El test muestra: âœ… PASS / âŒ FAIL"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
COMANDO RÃPIDO PARA VERIFICAR TODO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

```bash
# Crear directorio si no existe
mkdir -p server/tests

# Ejecutar verificaciÃ³n
python server/tests/verificacion.py

# Si quieres solo un test especÃ­fico:
python -c "from server.tests.verificacion import test_chat_facturar; test_chat_facturar()"
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
META: LLEGAR A ESTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

```
   TOTAL: 8/8 tests pasaron (100%)

   ğŸ‰ SISTEMA LISTO PARA DEMO
```

O AL MENOS:

```
   TOTAL: 6/8 tests pasaron (75%)
   
   âš ï¸ SISTEMA PARCIALMENTE LISTO - FUNCIONALIDAD BÃSICA OK
```
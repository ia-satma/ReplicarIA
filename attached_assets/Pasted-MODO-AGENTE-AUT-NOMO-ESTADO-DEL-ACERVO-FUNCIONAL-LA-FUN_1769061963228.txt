MODO AGENTE AUTÃ“NOMO - ESTADO DEL ACERVO FUNCIONAL

LA FUNCIÃ“N "ESTADO DEL ACERVO" DEBE MOSTRAR:
- Documentos cargados vs faltantes
- Organizado por AGENTE (A1-A7)
- Documentos cargados en NEGRITAS/RESALTADO
- Click para ver el documento
- Progreso visual por agente

<TOON>

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
DISEÃ‘O: ESTADO DEL ACERVO POR AGENTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“š Estado del Acervo                                        [67% completo] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ğŸ¤– A1 - RazÃ³n de Negocios                                    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ âœ… **CÃ³digo Fiscal de la FederaciÃ³n (CFF)**          [376 chunks] ğŸ‘ï¸   â”‚â”‚
â”‚  â”‚ âœ… **Jurisprudencias RazÃ³n de Negocios**             [45 chunks]  ğŸ‘ï¸   â”‚â”‚
â”‚  â”‚ â¬š  Criterios SAT sobre simulaciÃ³n                    [falta]      ğŸ“¤   â”‚â”‚
â”‚  â”‚ â¬š  Tesis SCJN materialidad                           [falta]      ğŸ“¤   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  ğŸ¤– A3 - Deducciones Autorizadas                              â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 60%â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ âœ… **Ley del ISR (LISR)**                            [289 chunks] ğŸ‘ï¸   â”‚â”‚
â”‚  â”‚ âœ… **Reglamento LISR**                               [156 chunks] ğŸ‘ï¸   â”‚â”‚
â”‚  â”‚ â¬š  RMF 2025 - Deducciones                            [falta]      ğŸ“¤   â”‚â”‚
â”‚  â”‚ â¬š  Jurisprudencias deducciones personales            [falta]      ğŸ“¤   â”‚â”‚
â”‚  â”‚ â¬š  Criterios no vinculativos                         [falta]      ğŸ“¤   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  ğŸ¤– A6 - VerificaciÃ³n EFOS                                    â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 20%â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ â¬š  Lista 69-B actualizada                            [CRÃTICO]    ğŸ“¤   â”‚â”‚
â”‚  â”‚ â¬š  Procedimiento Art. 69-B                           [falta]      ğŸ“¤   â”‚â”‚
â”‚  â”‚ âœ… **CFF Art. 69-B (referencia)**                    [12 chunks]  ğŸ‘ï¸   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ‘ï¸ = Ver documento    ğŸ“¤ = Subir documento    âœ… = Cargado    â¬š = Faltante
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FASE 1: DEFINIR DOCUMENTOS REQUERIDOS POR AGENTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Crear: server/config/acervoRequerido.ts

```typescript
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DEFINICIÃ“N DE DOCUMENTOS REQUERIDOS POR CADA AGENTE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

export interface DocumentoRequerido {
  id: string;
  nombre: string;
  descripcion: string;
  categoria: 'marco_legal' | 'jurisprudencias' | 'criterios_sat' | 'catalogos' | 'guias';
  criticidad: 'critico' | 'importante' | 'recomendado';
  codigosAceptados: string[]; // CÃ³digos que satisfacen este requerimiento
  urlDescarga?: string; // URL donde se puede descargar
  instrucciones?: string; // CÃ³mo obtener el documento
}

export interface AgenteConfig {
  id: string;
  nombre: string;
  descripcion: string;
  icono: string;
  documentosRequeridos: DocumentoRequerido[];
}

export const AGENTES_CONFIG: AgenteConfig[] = [
  {
    id: 'A1',
    nombre: 'RazÃ³n de Negocios',
    descripcion: 'Analiza la razÃ³n de negocios y sustancia econÃ³mica de operaciones',
    icono: 'âš–ï¸',
    documentosRequeridos: [
      {
        id: 'a1_cff',
        nombre: 'CÃ³digo Fiscal de la FederaciÃ³n',
        descripcion: 'ArtÃ­culos 5-A, 69-B y relacionados con simulaciÃ³n',
        categoria: 'marco_legal',
        criticidad: 'critico',
        codigosAceptados: ['CFF'],
        urlDescarga: 'https://www.diputados.gob.mx/LeyesBiblio/pdf/CFF.pdf',
        instrucciones: 'Descargar versiÃ³n vigente del sitio de la CÃ¡mara de Diputados'
      },
      {
        id: 'a1_juris_razon',
        nombre: 'Jurisprudencias sobre RazÃ³n de Negocios',
        descripcion: 'Tesis y jurisprudencias del TFJA y SCJN',
        categoria: 'jurisprudencias',
        criticidad: 'critico',
        codigosAceptados: ['JURIS_RAZON', 'TESIS_RAZON'],
        instrucciones: 'Buscar en el Semanario Judicial de la FederaciÃ³n'
      },
      {
        id: 'a1_criterios_simulacion',
        nombre: 'Criterios SAT sobre SimulaciÃ³n',
        descripcion: 'Criterios normativos y no vinculativos',
        categoria: 'criterios_sat',
        criticidad: 'importante',
        codigosAceptados: ['CRITERIOS_SIMULACION'],
        instrucciones: 'Obtener del Anexo 7 de la RMF'
      },
      {
        id: 'a1_materialidad',
        nombre: 'Tesis sobre Materialidad de Operaciones',
        descripcion: 'Criterios judiciales sobre materialidad',
        categoria: 'jurisprudencias',
        criticidad: 'importante',
        codigosAceptados: ['TESIS_MATERIALIDAD', 'JURIS_MATERIALIDAD']
      }
    ]
  },
  {
    id: 'A2',
    nombre: 'Materialidad y Sustancia',
    descripcion: 'Verifica evidencia documental y materialidad de operaciones',
    icono: 'ğŸ“‹',
    documentosRequeridos: [
      {
        id: 'a2_cff',
        nombre: 'CFF - Comprobantes Fiscales',
        descripcion: 'ArtÃ­culos 29, 29-A y requisitos de CFDI',
        categoria: 'marco_legal',
        criticidad: 'critico',
        codigosAceptados: ['CFF']
      },
      {
        id: 'a2_rmf_cfdi',
        nombre: 'RMF - Reglas de CFDI',
        descripcion: 'Reglas 2.7.1 a 2.7.5 sobre comprobantes',
        categoria: 'marco_legal',
        criticidad: 'critico',
        codigosAceptados: ['RMF', 'RMF_2025', 'RMF_2026']
      },
      {
        id: 'a2_guia_llenado',
        nombre: 'GuÃ­a de Llenado CFDI',
        descripcion: 'GuÃ­a oficial del SAT para CFDI 4.0',
        categoria: 'guias',
        criticidad: 'importante',
        codigosAceptados: ['GUIA_CFDI'],
        urlDescarga: 'https://www.sat.gob.mx/consulta/97722/guia-de-llenado-del-comprobante-fiscal-digital-por-internet'
      }
    ]
  },
  {
    id: 'A3',
    nombre: 'Deducciones Autorizadas',
    descripcion: 'Valida requisitos de deducciones fiscales',
    icono: 'ğŸ’°',
    documentosRequeridos: [
      {
        id: 'a3_lisr',
        nombre: 'Ley del Impuesto Sobre la Renta',
        descripcion: 'TÃ­tulo II, CapÃ­tulo II - Deducciones',
        categoria: 'marco_legal',
        criticidad: 'critico',
        codigosAceptados: ['LISR'],
        urlDescarga: 'https://www.diputados.gob.mx/LeyesBiblio/pdf/LISR.pdf'
      },
      {
        id: 'a3_rlisr',
        nombre: 'Reglamento de la LISR',
        descripcion: 'Disposiciones reglamentarias sobre deducciones',
        categoria: 'marco_legal',
        criticidad: 'critico',
        codigosAceptados: ['RLISR']
      },
      {
        id: 'a3_rmf_deducciones',
        nombre: 'RMF - Deducciones',
        descripcion: 'Reglas sobre deducciones autorizadas',
        categoria: 'marco_legal',
        criticidad: 'critico',
        codigosAceptados: ['RMF', 'RMF_2025', 'RMF_2026']
      },
      {
        id: 'a3_juris_deducciones',
        nombre: 'Jurisprudencias sobre Deducciones',
        descripcion: 'Criterios judiciales sobre deducibilidad',
        categoria: 'jurisprudencias',
        criticidad: 'importante',
        codigosAceptados: ['JURIS_DEDUCCIONES']
      },
      {
        id: 'a3_criterios_nv',
        nombre: 'Criterios No Vinculativos',
        descripcion: 'Anexo 3 de la RMF',
        categoria: 'criterios_sat',
        criticidad: 'recomendado',
        codigosAceptados: ['CRITERIOS_NV']
      }
    ]
  },
  {
    id: 'A4',
    nombre: 'Obligaciones Formales',
    descripcion: 'Verifica cumplimiento de obligaciones fiscales',
    icono: 'ğŸ“',
    documentosRequeridos: [
      {
        id: 'a4_cff_obligaciones',
        nombre: 'CFF - Obligaciones de Contribuyentes',
        descripcion: 'TÃ­tulo III sobre obligaciones',
        categoria: 'marco_legal',
        criticidad: 'critico',
        codigosAceptados: ['CFF']
      },
      {
        id: 'a4_rcff',
        nombre: 'Reglamento del CFF',
        descripcion: 'Disposiciones sobre cumplimiento',
        categoria: 'marco_legal',
        criticidad: 'importante',
        codigosAceptados: ['RCFF']
      },
      {
        id: 'a4_calendario',
        nombre: 'Calendario Fiscal Vigente',
        descripcion: 'Fechas de cumplimiento de obligaciones',
        categoria: 'guias',
        criticidad: 'importante',
        codigosAceptados: ['CALENDARIO_FISCAL']
      }
    ]
  },
  {
    id: 'A5',
    nombre: 'Intangibles y RegalÃ­as',
    descripcion: 'Especialista en deducciÃ³n de activos intangibles',
    icono: 'ğŸ’',
    documentosRequeridos: [
      {
        id: 'a5_lisr_intangibles',
        nombre: 'LISR - Inversiones e Intangibles',
        descripcion: 'ArtÃ­culos 31-38 sobre deducciÃ³n de inversiones',
        categoria: 'marco_legal',
        criticidad: 'critico',
        codigosAceptados: ['LISR']
      },
      {
        id: 'a5_precios_transferencia',
        nombre: 'LISR - Precios de Transferencia',
        descripcion: 'ArtÃ­culos 76 fracciÃ³n XII, 179-180',
        categoria: 'marco_legal',
        criticidad: 'critico',
        codigosAceptados: ['LISR']
      },
      {
        id: 'a5_guia_ocde',
        nombre: 'GuÃ­as OCDE Precios de Transferencia',
        descripcion: 'Lineamientos de la OCDE aplicables en MÃ©xico',
        categoria: 'guias',
        criticidad: 'importante',
        codigosAceptados: ['OCDE_PT']
      },
      {
        id: 'a5_juris_intangibles',
        nombre: 'Jurisprudencias sobre Intangibles',
        descripcion: 'Criterios judiciales sobre amortizaciÃ³n',
        categoria: 'jurisprudencias',
        criticidad: 'recomendado',
        codigosAceptados: ['JURIS_INTANGIBLES']
      }
    ]
  },
  {
    id: 'A6',
    nombre: 'VerificaciÃ³n EFOS',
    descripcion: 'Detecta operaciones con empresas fantasma',
    icono: 'ğŸ”',
    documentosRequeridos: [
      {
        id: 'a6_lista_69b',
        nombre: 'Lista de Contribuyentes Art. 69-B (EFOS)',
        descripcion: 'Lista actualizada del SAT de empresas con operaciones simuladas',
        categoria: 'catalogos',
        criticidad: 'critico',
        codigosAceptados: ['LISTA_69B', 'EFOS'],
        urlDescarga: 'https://www.sat.gob.mx/consultas/76674/consulta-la-relacion-de-contribuyentes-con-operaciones-presuntamente-inexistentes',
        instrucciones: 'Descargar listado actualizado del portal SAT. Se actualiza cada semana.'
      },
      {
        id: 'a6_procedimiento_69b',
        nombre: 'Procedimiento Art. 69-B CFF',
        descripcion: 'Texto completo del artÃ­culo y su procedimiento',
        categoria: 'marco_legal',
        criticidad: 'critico',
        codigosAceptados: ['CFF']
      },
      {
        id: 'a6_juris_efos',
        nombre: 'Jurisprudencias sobre EFOS',
        descripcion: 'Criterios judiciales sobre operaciones simuladas',
        categoria: 'jurisprudencias',
        criticidad: 'importante',
        codigosAceptados: ['JURIS_EFOS', 'JURIS_69B']
      }
    ]
  },
  {
    id: 'A7',
    nombre: 'Defensa y Estrategia',
    descripcion: 'Genera estrategias de defensa fiscal',
    icono: 'ğŸ›¡ï¸',
    documentosRequeridos: [
      {
        id: 'a7_cff_recursos',
        nombre: 'CFF - Medios de Defensa',
        descripcion: 'TÃ­tulo V sobre procedimientos administrativos',
        categoria: 'marco_legal',
        criticidad: 'critico',
        codigosAceptados: ['CFF']
      },
      {
        id: 'a7_lfpca',
        nombre: 'Ley Federal de Procedimiento Contencioso Administrativo',
        descripcion: 'Juicio ante el TFJA',
        categoria: 'marco_legal',
        criticidad: 'critico',
        codigosAceptados: ['LFPCA'],
        urlDescarga: 'https://www.diputados.gob.mx/LeyesBiblio/pdf/LFPCA.pdf'
      },
      {
        id: 'a7_juris_defensa',
        nombre: 'Jurisprudencias sobre Defensa Fiscal',
        descripcion: 'Tesis relevantes del TFJA y SCJN',
        categoria: 'jurisprudencias',
        criticidad: 'importante',
        codigosAceptados: ['JURIS_DEFENSA', 'JURIS_AMPARO']
      },
      {
        id: 'a7_plazos',
        nombre: 'GuÃ­a de Plazos Procesales',
        descripcion: 'Plazos para cada medio de defensa',
        categoria: 'guias',
        criticidad: 'recomendado',
        codigosAceptados: ['GUIA_PLAZOS']
      }
    ]
  }
];

// Helper para obtener todos los documentos Ãºnicos requeridos
export function getDocumentosUnicos(): DocumentoRequerido[] {
  const mapa = new Map<string, DocumentoRequerido>();
  
  for (const agente of AGENTES_CONFIG) {
    for (const doc of agente.documentosRequeridos) {
      if (!mapa.has(doc.id)) {
        mapa.set(doc.id, doc);
      }
    }
  }
  
  return Array.from(mapa.values());
}

// Helper para obtener agentes que necesitan un documento
export function getAgentesQueNecesitan(codigoDocumento: string): string[] {
  const agentes: string[] = [];
  
  for (const agente of AGENTES_CONFIG) {
    for (const doc of agente.documentosRequeridos) {
      if (doc.codigosAceptados.includes(codigoDocumento)) {
        agentes.push(agente.id);
        break;
      }
    }
  }
  
  return agentes;
}
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FASE 2: API DE ESTADO DEL ACERVO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Crear/Actualizar: server/routes/biblioteca.ts (agregar endpoint)

```typescript
import { AGENTES_CONFIG, DocumentoRequerido } from '../config/acervoRequerido';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ESTADO DEL ACERVO POR AGENTE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
router.get('/acervo/estado', async (req: Request, res: Response) => {
  try {
    // Obtener documentos cargados
    const documentosCargados = await db.query(`
      SELECT 
        id, nombre, ley_codigo, categoria, total_chunks,
        created_at, resumen
      FROM kb_documentos 
      WHERE activo = TRUE AND procesado = TRUE
      ORDER BY created_at DESC
    `);

    const docsCargadosMap = new Map<string, any>();
    for (const doc of documentosCargados.rows) {
      // Mapear por cÃ³digo de ley
      if (doc.ley_codigo) {
        docsCargadosMap.set(doc.ley_codigo, doc);
      }
      // TambiÃ©n mapear por nombre normalizado
      const nombreNorm = doc.nombre.toUpperCase().replace(/[^A-Z0-9]/g, '');
      docsCargadosMap.set(nombreNorm, doc);
    }

    // Construir estado por agente
    const estadoPorAgente = AGENTES_CONFIG.map(agente => {
      const documentosEstado = agente.documentosRequeridos.map(docReq => {
        // Buscar si estÃ¡ cargado
        let documentoCargado = null;
        
        for (const codigo of docReq.codigosAceptados) {
          if (docsCargadosMap.has(codigo)) {
            documentoCargado = docsCargadosMap.get(codigo);
            break;
          }
        }

        return {
          ...docReq,
          cargado: !!documentoCargado,
          documentoId: documentoCargado?.id || null,
          nombreCargado: documentoCargado?.nombre || null,
          chunks: documentoCargado?.total_chunks || 0,
          fechaCarga: documentoCargado?.created_at || null
        };
      });

      // Calcular progreso
      const totalRequeridos = documentosEstado.length;
      const totalCargados = documentosEstado.filter(d => d.cargado).length;
      const progreso = totalRequeridos > 0 ? Math.round((totalCargados / totalRequeridos) * 100) : 0;

      // Calcular progreso ponderado por criticidad
      const criticos = documentosEstado.filter(d => d.criticidad === 'critico');
      const criticosCargados = criticos.filter(d => d.cargado).length;
      const progresoCritico = criticos.length > 0 ? Math.round((criticosCargados / criticos.length) * 100) : 100;

      return {
        id: agente.id,
        nombre: agente.nombre,
        descripcion: agente.descripcion,
        icono: agente.icono,
        progreso,
        progresoCritico,
        totalDocumentos: totalRequeridos,
        documentosCargados: totalCargados,
        documentosFaltantes: totalRequeridos - totalCargados,
        documentos: documentosEstado,
        operativo: progresoCritico >= 50 // Agente operativo si tiene al menos 50% de crÃ­ticos
      };
    });

    // Calcular totales globales
    const totalDocumentosUnicos = new Set(
      AGENTES_CONFIG.flatMap(a => a.documentosRequeridos.map(d => d.id))
    ).size;
    
    const documentosCargadosUnicos = new Set(
      estadoPorAgente.flatMap(a => 
        a.documentos.filter(d => d.cargado).map(d => d.id)
      )
    ).size;

    const progresoGlobal = Math.round((documentosCargadosUnicos / totalDocumentosUnicos) * 100);

    // Alertas crÃ­ticas
    const alertas: Array<{ tipo: 'critico' | 'importante' | 'info'; mensaje: string; agenteId?: string }> = [];

    for (const agente of estadoPorAgente) {
      const criticosFaltantes = agente.documentos.filter(d => !d.cargado && d.criticidad === 'critico');
      
      for (const doc of criticosFaltantes) {
        alertas.push({
          tipo: 'critico',
          mensaje: `${agente.nombre} necesita: ${doc.nombre}`,
          agenteId: agente.id
        });
      }
    }

    res.json({
      success: true,
      progresoGlobal,
      totalDocumentosRequeridos: totalDocumentosUnicos,
      totalDocumentosCargados: documentosCargadosUnicos,
      agentes: estadoPorAgente,
      alertas: alertas.slice(0, 10), // MÃ¡ximo 10 alertas
      documentosCargados: documentosCargados.rows // Lista de documentos reales
    });

  } catch (error: any) {
    console.error('Error obteniendo estado del acervo:', error);
    res.status(500).json({ success: false, error: error.message });
  }
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// OBTENER DOCUMENTO ESPECÃFICO (para vista previa)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
router.get('/documento/:id', async (req: Request, res: Response) => {
  try {
    const { id } = req.params;

    // Obtener documento
    const docResult = await db.query(`
      SELECT * FROM kb_documentos WHERE id = $1
    `, [id]);

    if (docResult.rows.length === 0) {
      return res.status(404).json({ success: false, error: 'Documento no encontrado' });
    }

    const documento = docResult.rows[0];

    // Obtener chunks del documento
    const chunksResult = await db.query(`
      SELECT id, contenido, articulo, tipo_contenido, chunk_index
      FROM kb_chunks 
      WHERE documento_id = $1
      ORDER BY chunk_index
      LIMIT 50
    `, [id]);

    // Obtener a quÃ© agentes estÃ¡ asignado
    const agentesResult = await db.query(`
      SELECT DISTINCT agente_id, COUNT(*) as chunks
      FROM kb_chunk_agente ca
      JOIN kb_chunks c ON ca.chunk_id = c.id
      WHERE c.documento_id = $1
      GROUP BY agente_id
    `, [id]);

    res.json({
      success: true,
      documento: {
        ...documento,
        contenido_preview: documento.contenido_completo?.substring(0, 5000) || '',
        contenido_completo: undefined // No enviar todo el contenido
      },
      chunks: chunksResult.rows,
      totalChunks: documento.total_chunks,
      agentesAsignados: agentesResult.rows
    });

  } catch (error: any) {
    console.error('Error obteniendo documento:', error);
    res.status(500).json({ success: false, error: error.message });
  }
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// OBTENER CHUNKS DE UN DOCUMENTO POR ARTÃCULO
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
router.get('/documento/:id/articulos', async (req: Request, res: Response) => {
  try {
    const { id } = req.params;

    const result = await db.query(`
      SELECT 
        articulo,
        COUNT(*) as chunks,
        MIN(id) as primer_chunk_id,
        STRING_AGG(DISTINCT tipo_contenido, ', ') as tipos
      FROM kb_chunks 
      WHERE documento_id = $1 AND articulo IS NOT NULL
      GROUP BY articulo
      ORDER BY 
        CAST(REGEXP_REPLACE(articulo, '[^0-9]', '', 'g') AS INTEGER) NULLS LAST
    `, [id]);

    res.json({
      success: true,
      articulos: result.rows
    });

  } catch (error: any) {
    console.error('Error obteniendo artÃ­culos:', error);
    res.status(500).json({ success: false, error: error.message });
  }
});
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FASE 3: COMPONENTE FRONTEND - ESTADO DEL ACERVO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Crear: frontend/src/components/biblioteca/EstadoAcervo.tsx

```typescript
import React, { useState, useEffect } from 'react';

interface DocumentoEstado {
  id: string;
  nombre: string;
  descripcion: string;
  categoria: string;
  criticidad: 'critico' | 'importante' | 'recomendado';
  cargado: boolean;
  documentoId: number | null;
  chunks: number;
  fechaCarga: string | null;
  urlDescarga?: string;
  instrucciones?: string;
}

interface AgenteEstado {
  id: string;
  nombre: string;
  descripcion: string;
  icono: string;
  progreso: number;
  progresoCritico: number;
  totalDocumentos: number;
  documentosCargados: number;
  documentosFaltantes: number;
  documentos: DocumentoEstado[];
  operativo: boolean;
}

interface EstadoAcervoData {
  progresoGlobal: number;
  totalDocumentosRequeridos: number;
  totalDocumentosCargados: number;
  agentes: AgenteEstado[];
  alertas: Array<{ tipo: string; mensaje: string; agenteId?: string }>;
}

interface Props {
  onUploadClick: (documentoId: string, nombre: string) => void;
  onViewClick: (documentoId: number) => void;
}

export const EstadoAcervo: React.FC<Props> = ({ onUploadClick, onViewClick }) => {
  const [estado, setEstado] = useState<EstadoAcervoData | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [agenteExpandido, setAgenteExpandido] = useState<string | null>(null);
  const [documentoViewing, setDocumentoViewing] = useState<number | null>(null);

  useEffect(() => {
    cargarEstado();
  }, []);

  const cargarEstado = async () => {
    try {
      setLoading(true);
      const response = await fetch('/api/biblioteca/acervo/estado');
      const text = await response.text();
      const data = JSON.parse(text);

      if (!data.success) {
        throw new Error(data.error);
      }

      setEstado(data);
      
      // Expandir el primer agente con documentos faltantes
      const primerIncompleto = data.agentes.find((a: AgenteEstado) => a.progreso < 100);
      if (primerIncompleto) {
        setAgenteExpandido(primerIncompleto.id);
      }

    } catch (err: any) {
      setError(err.message);
    } finally {
      setLoading(false);
    }
  };

  if (loading) {
    return (
      <div className="p-6 text-center">
        <div className="animate-spin w-8 h-8 border-2 border-cyan-500 border-t-transparent rounded-full mx-auto mb-4"></div>
        <p className="text-gray-400">Cargando estado del acervo...</p>
      </div>
    );
  }

  if (error) {
    return (
      <div className="p-6 bg-red-900/30 border border-red-500 rounded-lg">
        <p className="text-red-200">Error: {error}</p>
        <button onClick={cargarEstado} className="mt-2 text-cyan-400 hover:underline">
          Reintentar
        </button>
      </div>
    );
  }

  if (!estado) return null;

  return (
    <div className="space-y-6">
      {/* Header con progreso global */}
      <div className="bg-gray-800 rounded-lg p-6">
        <div className="flex items-center justify-between mb-4">
          <h2 className="text-2xl font-bold text-white">ğŸ“š Estado del Acervo</h2>
          <div className="text-right">
            <div className="text-3xl font-bold text-cyan-400">{estado.progresoGlobal}%</div>
            <div className="text-sm text-gray-400">completitud</div>
          </div>
        </div>

        {/* Barra de progreso global */}
        <div className="h-4 bg-gray-700 rounded-full overflow-hidden mb-4">
          <div 
            className={`h-full transition-all duration-500 ${
              estado.progresoGlobal >= 80 ? 'bg-green-500' :
              estado.progresoGlobal >= 50 ? 'bg-yellow-500' : 'bg-red-500'
            }`}
            style={{ width: `${estado.progresoGlobal}%` }}
          />
        </div>

        <div className="flex justify-between text-sm text-gray-400">
          <span>{estado.totalDocumentosCargados} documentos cargados</span>
          <span>{estado.totalDocumentosRequeridos - estado.totalDocumentosCargados} faltantes</span>
        </div>
      </div>

      {/* Alertas crÃ­ticas */}
      {estado.alertas.length > 0 && (
        <div className="bg-red-900/30 border border-red-500 rounded-lg p-4">
          <h3 className="text-red-400 font-semibold mb-2">âš ï¸ Documentos CrÃ­ticos Faltantes</h3>
          <ul className="space-y-1">
            {estado.alertas.slice(0, 5).map((alerta, idx) => (
              <li key={idx} className="text-red-200 text-sm flex items-center gap-2">
                <span className="text-red-500">â€¢</span>
                {alerta.mensaje}
              </li>
            ))}
          </ul>
        </div>
      )}

      {/* Lista de agentes */}
      <div className="space-y-4">
        {estado.agentes.map(agente => (
          <div 
            key={agente.id}
            className={`bg-gray-800 rounded-lg overflow-hidden border ${
              agente.operativo ? 'border-gray-700' : 'border-red-700'
            }`}
          >
            {/* Header del agente */}
            <button
              onClick={() => setAgenteExpandido(agenteExpandido === agente.id ? null : agente.id)}
              className="w-full p-4 flex items-center justify-between hover:bg-gray-700/50 transition"
            >
              <div className="flex items-center gap-3">
                <span className="text-2xl">{agente.icono}</span>
                <div className="text-left">
                  <div className="flex items-center gap-2">
                    <span className="font-semibold text-white">{agente.id}</span>
                    <span className="text-gray-300">- {agente.nombre}</span>
                    {!agente.operativo && (
                      <span className="px-2 py-0.5 bg-red-600 text-white text-xs rounded">
                        NO OPERATIVO
                      </span>
                    )}
                  </div>
                  <p className="text-sm text-gray-400">{agente.descripcion}</p>
                </div>
              </div>

              <div className="flex items-center gap-4">
                {/* Mini barra de progreso */}
                <div className="w-32">
                  <div className="h-2 bg-gray-700 rounded-full overflow-hidden">
                    <div 
                      className={`h-full ${
                        agente.progreso >= 80 ? 'bg-green-500' :
                        agente.progreso >= 50 ? 'bg-yellow-500' : 'bg-red-500'
                      }`}
                      style={{ width: `${agente.progreso}%` }}
                    />
                  </div>
                  <div className="flex justify-between text-xs text-gray-500 mt-1">
                    <span>{agente.documentosCargados}/{agente.totalDocumentos}</span>
                    <span>{agente.progreso}%</span>
                  </div>
                </div>

                <span className={`transform transition ${agenteExpandido === agente.id ? 'rotate-180' : ''}`}>
                  â–¼
                </span>
              </div>
            </button>

            {/* Lista de documentos (expandible) */}
            {agenteExpandido === agente.id && (
              <div className="border-t border-gray-700 p-4 space-y-2">
                {agente.documentos.map(doc => (
                  <div 
                    key={doc.id}
                    className={`flex items-center justify-between p-3 rounded-lg ${
                      doc.cargado 
                        ? 'bg-green-900/20 border border-green-700' 
                        : doc.criticidad === 'critico'
                          ? 'bg-red-900/20 border border-red-700'
                          : 'bg-gray-700/30 border border-gray-600'
                    }`}
                  >
                    <div className="flex items-center gap-3 flex-1">
                      {/* Icono de estado */}
                      <span className="text-xl">
                        {doc.cargado ? 'âœ…' : doc.criticidad === 'critico' ? 'ğŸ”´' : 'â¬š'}
                      </span>

                      {/* Nombre y descripciÃ³n */}
                      <div className="flex-1">
                        <div className={`${doc.cargado ? 'font-bold text-white' : 'text-gray-300'}`}>
                          {doc.nombre}
                          {doc.cargado && (
                            <span className="ml-2 text-sm text-green-400">
                              [{doc.chunks} chunks]
                            </span>
                          )}
                        </div>
                        <div className="text-sm text-gray-500">{doc.descripcion}</div>
                        {!doc.cargado && doc.instrucciones && (
                          <div className="text-xs text-cyan-400 mt-1">
                            ğŸ’¡ {doc.instrucciones}
                          </div>
                        )}
                      </div>

                      {/* Badge de criticidad */}
                      <span className={`px-2 py-0.5 rounded text-xs ${
                        doc.criticidad === 'critico' ? 'bg-red-600 text-white' :
                        doc.criticidad === 'importante' ? 'bg-yellow-600 text-black' :
                        'bg-gray-600 text-white'
                      }`}>
                        {doc.criticidad}
                      </span>
                    </div>

                    {/* Acciones */}
                    <div className="flex items-center gap-2 ml-4">
                      {doc.cargado ? (
                        <button
                          onClick={() => doc.documentoId && onViewClick(doc.documentoId)}
                          className="px-3 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white rounded flex items-center gap-1"
                        >
                          ğŸ‘ï¸ Ver
                        </button>
                      ) : (
                        <>
                          {doc.urlDescarga && (
                            <a
                              href={doc.urlDescarga}
                              target="_blank"
                              rel="noopener noreferrer"
                              className="px-3 py-1.5 bg-gray-600 hover:bg-gray-500 text-white rounded flex items-center gap-1"
                            >
                              â¬‡ï¸ Descargar
                            </a>
                          )}
                          <button
                            onClick={() => onUploadClick(doc.id, doc.nombre)}
                            className="px-3 py-1.5 bg-green-600 hover:bg-green-500 text-white rounded flex items-center gap-1"
                          >
                            ğŸ“¤ Subir
                          </button>
                        </>
                      )}
                    </div>
                  </div>
                ))}
              </div>
            )}
          </div>
        ))}
      </div>

      {/* Leyenda */}
      <div className="flex flex-wrap gap-4 text-sm text-gray-400 justify-center">
        <span>âœ… Cargado</span>
        <span>ğŸ”´ CrÃ­tico faltante</span>
        <span>â¬š Recomendado faltante</span>
        <span>ğŸ‘ï¸ Ver documento</span>
        <span>ğŸ“¤ Subir documento</span>
      </div>
    </div>
  );
};
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FASE 4: COMPONENTE VISOR DE DOCUMENTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Crear: frontend/src/components/biblioteca/VisorDocumento.tsx

```typescript
import React, { useState, useEffect } from 'react';

interface Props {
  documentoId: number;
  onClose: () => void;
}

interface Articulo {
  articulo: string;
  chunks: number;
  tipos: string;
}

export const VisorDocumento: React.FC<Props> = ({ documentoId, onClose }) => {
  const [documento, setDocumento] = useState<any>(null);
  const [articulos, setArticulos] = useState<Articulo[]>([]);
  const [chunkSeleccionado, setChunkSeleccionado] = useState<any>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    cargarDocumento();
  }, [documentoId]);

  const cargarDocumento = async () => {
    try {
      setLoading(true);

      // Cargar documento
      const docRes = await fetch(`/api/biblioteca/documento/${documentoId}`);
      const docData = await docRes.json();
      setDocumento(docData);

      // Cargar artÃ­culos
      const artRes = await fetch(`/api/biblioteca/documento/${documentoId}/articulos`);
      const artData = await artRes.json();
      setArticulos(artData.articulos || []);

    } catch (error) {
      console.error('Error cargando documento:', error);
    } finally {
      setLoading(false);
    }
  };

  if (loading) {
    return (
      <div className="fixed inset-0 bg-black/80 flex items-center justify-center z-50">
        <div className="animate-spin w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full"></div>
      </div>
    );
  }

  if (!documento) return null;

  return (
    <div className="fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4">
      <div className="bg-gray-900 rounded-xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col">
        {/* Header */}
        <div className="p-4 border-b border-gray-700 flex items-center justify-between">
          <div>
            <h2 className="text-xl font-bold text-white">{documento.documento?.nombre}</h2>
            <p className="text-sm text-gray-400">
              {documento.documento?.categoria} â€¢ {documento.totalChunks} chunks â€¢ 
              Cargado: {new Date(documento.documento?.created_at).toLocaleDateString()}
            </p>
          </div>
          <button
            onClick={onClose}
            className="p-2 hover:bg-gray-700 rounded-lg text-gray-400 hover:text-white"
          >
            âœ•
          </button>
        </div>

        <div className="flex flex-1 overflow-hidden">
          {/* Sidebar - Ãndice de artÃ­culos */}
          <div className="w-64 border-r border-gray-700 overflow-y-auto p-4">
            <h3 className="text-sm font-semibold text-gray-400 mb-3">
              ğŸ“‘ Ãndice ({articulos.length} artÃ­culos)
            </h3>
            <div className="space-y-1">
              {articulos.map((art, idx) => (
                <button
                  key={idx}
                  onClick={() => {
                    const chunk = documento.chunks?.find((c: any) => c.articulo === art.articulo);
                    setChunkSeleccionado(chunk);
                  }}
                  className={`w-full text-left px-3 py-2 rounded text-sm hover:bg-gray-700 transition ${
                    chunkSeleccionado?.articulo === art.articulo ? 'bg-cyan-900 text-cyan-200' : 'text-gray-300'
                  }`}
                >
                  <div className="font-medium">Art. {art.articulo}</div>
                  <div className="text-xs text-gray-500">{art.chunks} chunks</div>
                </button>
              ))}
            </div>
          </div>

          {/* Contenido principal */}
          <div className="flex-1 overflow-y-auto p-6">
            {chunkSeleccionado ? (
              <div>
                <h3 className="text-lg font-bold text-white mb-4">
                  ArtÃ­culo {chunkSeleccionado.articulo}
                </h3>
                <div className="prose prose-invert max-w-none">
                  <pre className="whitespace-pre-wrap text-sm text-gray-300 bg-gray-800 p-4 rounded-lg">
                    {chunkSeleccionado.contenido}
                  </pre>
                </div>
              </div>
            ) : (
              <div>
                <h3 className="text-lg font-bold text-white mb-4">Vista Previa</h3>
                <div className="prose prose-invert max-w-none">
                  <pre className="whitespace-pre-wrap text-sm text-gray-300 bg-gray-800 p-4 rounded-lg">
                    {documento.documento?.contenido_preview || 'Sin contenido disponible'}
                  </pre>
                </div>
              </div>
            )}
          </div>
        </div>

        {/* Footer - Agentes asignados */}
        <div className="p-4 border-t border-gray-700 bg-gray-800">
          <div className="flex items-center gap-4">
            <span className="text-sm text-gray-400">Asignado a:</span>
            {documento.agentesAsignados?.map((a: any) => (
              <span 
                key={a.agente_id}
                className="px-3 py-1 bg-cyan-900 text-cyan-200 rounded-full text-sm"
              >
                {a.agente_id} ({a.chunks} chunks)
              </span>
            ))}
          </div>
        </div>
      </div>
    </div>
  );
};
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FASE 5: INTEGRAR EN PÃGINA DE BIBLIOTECAR.IA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

En el componente principal de Bibliotecar.IA, agregar:

```typescript
import { EstadoAcervo } from './biblioteca/EstadoAcervo';
import { VisorDocumento } from './biblioteca/VisorDocumento';

// En el componente:
const [documentoViewing, setDocumentoViewing] = useState<number | null>(null);
const [uploadTarget, setUploadTarget] = useState<{ id: string; nombre: string } | null>(null);

// En el sidebar, el botÃ³n "Estado del acervo" debe mostrar:
<EstadoAcervo
  onUploadClick={(id, nombre) => {
    setUploadTarget({ id, nombre });
    // Abrir modal de upload
  }}
  onViewClick={(docId) => setDocumentoViewing(docId)}
/>

// Modal del visor:
{documentoViewing && (
  <VisorDocumento
    documentoId={documentoViewing}
    onClose={() => setDocumentoViewing(null)}
  />
)}
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CHECKLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ Archivo server/config/acervoRequerido.ts creado
â–¡ Endpoint GET /api/biblioteca/acervo/estado implementado
â–¡ Endpoint GET /api/biblioteca/documento/:id implementado
â–¡ Endpoint GET /api/biblioteca/documento/:id/articulos implementado
â–¡ Componente EstadoAcervo.tsx creado
â–¡ Componente VisorDocumento.tsx creado
â–¡ Integrado en pÃ¡gina principal de Bibliotecar.IA
â–¡ Deploy ejecutado

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
RESULTADO ESPERADO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Al hacer clic en "Estado del Acervo":
1. Se muestra progreso global (ej: 25%)
2. Lista de 7 agentes con su progreso individual
3. Al expandir un agente:
   - Documentos CARGADOS en **negritas** con âœ…
   - Documentos FALTANTES con â¬š o ğŸ”´
   - BotÃ³n "Ver" para documentos cargados â†’ abre visor
   - BotÃ³n "Subir" para documentos faltantes â†’ abre upload
4. Alertas crÃ­ticas si faltan documentos esenciales

</TOON>
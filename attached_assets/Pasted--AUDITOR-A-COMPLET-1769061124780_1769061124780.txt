â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”´ AUDITORÃA COMPLETA DEL SISTEMA - MODO HONESTIDAD BRUTAL ğŸ”´
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

INSTRUCCIÃ“N PARA REPLIT AGENT:

NECESITO QUE HAGAS UNA AUDITORÃA 100% HONESTA DEL SISTEMA.
NO QUIERO RESPUESTAS OPTIMISTAS NI "YA CASI ESTÃ".
QUIERO LA VERDAD CRUDA SOBRE QUÃ‰ FUNCIONA Y QUÃ‰ NO.

EJECUTA CADA VERIFICACIÃ“N Y REPORTA CON ESTE FORMATO:

âœ… FUNCIONA - [descripciÃ³n de quÃ© hace correctamente]
âš ï¸ PARCIAL - [quÃ© funciona y quÃ© falta]
âŒ NO FUNCIONA - [descripciÃ³n del error exacto]
ğŸ”´ NO EXISTE - [nunca se implementÃ³]

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SECCIÃ“N 1: VERIFICACIÃ“N DE BASE DE DATOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ejecuta estas queries y reporta el resultado EXACTO:

```sql
-- 1.1 Â¿QuÃ© tablas existen?
SELECT table_name FROM information_schema.tables 
WHERE table_schema = 'public' ORDER BY table_name;

-- 1.2 Â¿Hay usuarios en la tabla usuarios?
SELECT COUNT(*) as total, 
       COUNT(CASE WHEN activo = true THEN 1 END) as activos
FROM usuarios;

-- 1.3 Â¿Hay clientes en la tabla clientes?
SELECT COUNT(*) as total,
       COUNT(CASE WHEN estado = 'pendiente' THEN 1 END) as pendientes,
       COUNT(CASE WHEN estado = 'aprobado' THEN 1 END) as aprobados
FROM clientes;

-- 1.4 Â¿Existe la tabla de knowledge base?
SELECT EXISTS (SELECT FROM information_schema.tables WHERE table_name = 'kb_documentos');
SELECT EXISTS (SELECT FROM information_schema.tables WHERE table_name = 'kb_chunks');

-- 1.5 Â¿Hay documentos en el knowledge base?
SELECT COUNT(*) FROM kb_documentos WHERE activo = true;
SELECT COUNT(*) FROM kb_chunks;

-- 1.6 Â¿Existe extensiÃ³n pgvector para embeddings?
SELECT EXISTS (SELECT FROM pg_extension WHERE extname = 'vector');

-- 1.7 Â¿Hay embeddings generados?
SELECT COUNT(*) FROM kb_chunks WHERE embedding IS NOT NULL;
```

REPORTA:
| Tabla | Existe | Registros | Estado |
|-------|--------|-----------|--------|
| usuarios | | | |
| clientes | | | |
| empresas | | | |
| kb_documentos | | | |
| kb_chunks | | | |
| kb_chunk_agente | | | |
| codigos_acceso | | | |
| ... | | | |

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SECCIÃ“N 2: VERIFICACIÃ“N DE ENDPOINTS API
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ejecuta cada curl y reporta el resultado EXACTO (cÃ³digo HTTP + respuesta):

```bash
# 2.1 Health check bÃ¡sico
curl -s -o /dev/null -w "%{http_code}" http://localhost:5000/api/health

# 2.2 Login con contraseÃ±a
curl -X POST http://localhost:5000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"santiago@satma.mx","password":"Admin2024!"}'

# 2.3 Solicitar OTP
curl -X POST http://localhost:5000/api/auth/otp/request-code \
  -H "Content-Type: application/json" \
  -d '{"email":"demo@revisar-ia.com"}'

# 2.4 Crear cliente
curl -X POST http://localhost:5000/api/clientes \
  -H "Content-Type: application/json" \
  -d '{"nombre":"TEST AUDITORIA","rfc":"XAXX010101000"}'

# 2.5 Listar clientes
curl http://localhost:5000/api/clientes

# 2.6 Stats de biblioteca
curl http://localhost:5000/api/biblioteca/stats

# 2.7 Chat de biblioteca
curl -X POST http://localhost:5000/api/biblioteca/chat \
  -H "Content-Type: application/json" \
  -d '{"message":"hola"}'

# 2.8 Chat de Facturar.IA
curl -X POST http://localhost:5000/api/facturar/chat \
  -H "Content-Type: application/json" \
  -d '{"message":"hola"}'

# 2.9 Onboarding investigar
curl -X POST http://localhost:5000/api/onboarding/investigar \
  -H "Content-Type: application/json" \
  -d '{"sitio_web":"google.com"}'

# 2.10 Agentes status
curl http://localhost:5000/api/agents/status
```

REPORTA:
| Endpoint | MÃ©todo | Status | Respuesta | Funciona |
|----------|--------|--------|-----------|----------|
| /api/health | GET | | | |
| /api/auth/login | POST | | | |
| /api/auth/otp/request-code | POST | | | |
| /api/clientes | POST | | | |
| /api/clientes | GET | | | |
| /api/biblioteca/stats | GET | | | |
| /api/biblioteca/chat | POST | | | |
| /api/biblioteca/upload | POST | | | |
| /api/facturar/chat | POST | | | |
| /api/voice/tts | POST | | | |
| /api/onboarding/investigar | POST | | | |
| /api/agents/status | GET | | | |
| /api/admin/clientes | GET | | | |

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SECCIÃ“N 3: VERIFICACIÃ“N DE ARCHIVOS DE CÃ“DIGO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Verifica si estos archivos EXISTEN y tienen contenido funcional:

```bash
# Backend - Rutas
ls -la server/routes/
cat server/routes/clientes.ts | head -50
cat server/routes/biblioteca.ts | head -50
cat server/routes/facturar.ts | head -50
cat server/routes/voice.ts | head -50
cat server/routes/onboarding.ts | head -50
cat server/routes/agents.ts | head -50

# Backend - Servicios
ls -la server/services/
ls -la server/services/ai/
ls -la server/services/biblioteca/

# Backend - Registro de rutas en index
grep -n "app.use.*api" server/index.ts

# Frontend - Componentes
ls -la frontend/src/components/
ls -la frontend/src/pages/
```

REPORTA:
| Archivo | Existe | LÃ­neas | Importado en index.ts | Funcional |
|---------|--------|--------|----------------------|-----------|
| server/routes/clientes.ts | | | | |
| server/routes/biblioteca.ts | | | | |
| server/routes/facturar.ts | | | | |
| server/routes/voice.ts | | | | |
| server/routes/onboarding.ts | | | | |
| server/routes/agents.ts | | | | |
| server/routes/admin/clientes.ts | | | | |
| server/services/ai/deepResearch.ts | | | | |
| server/services/ai/modelRouter.ts | | | | |
| server/services/biblioteca/procesadorDocumentos.ts | | | | |
| server/services/biblioteca/embeddings.ts | | | | |
| server/services/clienteContexto.ts | | | | |
| server/agents/orchestrator.ts | | | | |

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SECCIÃ“N 4: VERIFICACIÃ“N DE VARIABLES DE ENTORNO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

```bash
# Verificar que existen (NO mostrar valores completos por seguridad)
echo "DATABASE_URL: ${DATABASE_URL:+SET}"
echo "ANTHROPIC_API_KEY: ${ANTHROPIC_API_KEY:+SET}"
echo "OPENAI_API_KEY: ${OPENAI_API_KEY:+SET}"
echo "GOOGLE_AI_API_KEY: ${GOOGLE_AI_API_KEY:+SET}"
echo "ELEVENLABS_API_KEY: ${ELEVENLABS_API_KEY:+SET}"
echo "JWT_SECRET: ${JWT_SECRET:+SET}"
echo "RESEND_API_KEY: ${RESEND_API_KEY:+SET}"
echo "DREAMHOST_EMAIL_PASSWORD: ${DREAMHOST_EMAIL_PASSWORD:+SET}"
```

REPORTA:
| Variable | Configurada | Necesaria Para |
|----------|-------------|----------------|
| DATABASE_URL | | ConexiÃ³n a BD |
| ANTHROPIC_API_KEY | | Claude, Agentes |
| OPENAI_API_KEY | | Embeddings |
| GOOGLE_AI_API_KEY | | Gemini, Deep Research |
| ELEVENLABS_API_KEY | | Voz |
| JWT_SECRET | | AutenticaciÃ³n |
| RESEND_API_KEY | | Emails |

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SECCIÃ“N 5: VERIFICACIÃ“N DE FRONTEND - CADA BOTÃ“N Y ENLACE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

NAVEGA por la aplicaciÃ³n y verifica CADA elemento interactivo:

### 5.1 PANTALLA DE LOGIN
| Elemento | Funciona | Error/Problema |
|----------|----------|----------------|
| Input email | | |
| Input password | | |
| BotÃ³n "Iniciar SesiÃ³n" | | |
| Link "Solicitar cÃ³digo OTP" | | |
| BotÃ³n "Enviar cÃ³digo" | | |
| Input cÃ³digo OTP | | |
| BotÃ³n "Verificar cÃ³digo" | | |

### 5.2 SIDEBAR/MENÃš PRINCIPAL
| Elemento | Ruta | Funciona | Muestra contenido correcto |
|----------|------|----------|---------------------------|
| Dashboard | /dashboard | | |
| Clientes | /clientes | | |
| Proyectos | /proyectos | | |
| Bibliotecar.IA | /biblioteca | | |
| Facturar.IA | /facturar | | |
| ConfiguraciÃ³n | /config | | |
| Usuarios | /usuarios | | |
| Admin Clientes | /admin/clientes | | |

### 5.3 MÃ“DULO DE CLIENTES
| Elemento | Funciona | Error/Problema |
|----------|----------|----------------|
| BotÃ³n "Nuevo Cliente" | | |
| Formulario se abre | | |
| Campos se llenan | | |
| BotÃ³n "Confirmar y Crear Cliente" | | |
| Cliente aparece en lista | | |
| Editar cliente | | |
| Eliminar cliente | | |

### 5.4 BIBLIOTECAR.IA
| Elemento | Funciona | Error/Problema |
|----------|----------|----------------|
| Chat responde | | |
| BotÃ³n "Cargar documento" | | |
| Upload de PDF funciona | | |
| Documento se procesa | | |
| MÃ©tricas se actualizan | | |
| Chunks se crean | | |
| CategorÃ­as muestran % correcto | | |

### 5.5 FACTURAR.IA
| Elemento | Funciona | Error/Problema |
|----------|----------|----------------|
| Chat responde | | |
| BotÃ³n de voz | | |
| MicrÃ³fono funciona | | |
| Audio se reproduce | | |
| Sugerencias de claves SAT | | |

### 5.6 ONBOARDING INTELIGENTE (si existe)
| Elemento | Funciona | Error/Problema |
|----------|----------|----------------|
| Input de sitio web | | |
| Deep Research se ejecuta | | |
| Campos se auto-completan | | |
| ConfirmaciÃ³n funciona | | |

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SECCIÃ“N 6: VERIFICACIÃ“N DE FLUJOS COMPLETOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Prueba estos flujos de principio a fin:

### FLUJO 1: Login â†’ Dashboard
1. Abrir la app
2. Ingresar email y contraseÃ±a
3. Click en login
4. Ver dashboard
RESULTADO: [ ] Completo [ ] Falla en paso ___

### FLUJO 2: Crear Cliente Completo
1. Ir a Clientes
2. Click Nuevo Cliente
3. Llenar formulario
4. Click Confirmar
5. Ver cliente en lista
RESULTADO: [ ] Completo [ ] Falla en paso ___

### FLUJO 3: Subir Documento a Biblioteca
1. Ir a Bibliotecar.IA
2. Click Cargar documento
3. Seleccionar PDF
4. Esperar procesamiento
5. Ver mÃ©tricas actualizadas
6. Ver chunks creados
RESULTADO: [ ] Completo [ ] Falla en paso ___

### FLUJO 4: Chat con Agente
1. Ir a cualquier mÃ³dulo con chat
2. Escribir mensaje
3. Recibir respuesta
RESULTADO: [ ] Completo [ ] Falla en paso ___

### FLUJO 5: Deep Research (si existe)
1. Ir a Onboarding
2. Ingresar URL de empresa
3. Esperar investigaciÃ³n
4. Ver formulario auto-completado
5. Confirmar y crear
RESULTADO: [ ] Completo [ ] Falla en paso ___

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SECCIÃ“N 7: ERRORES EN CONSOLA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

```bash
# Ver errores recientes del servidor
tail -100 /var/log/app.log 2>/dev/null || echo "No hay archivo de log"

# Ver errores de npm
cat ~/.npm/_logs/*.log 2>/dev/null | tail -50

# Errores de TypeScript
npx tsc --noEmit 2>&1 | head -50
```

Abre la consola del navegador (F12) y reporta TODOS los errores JavaScript:
- Errores rojos
- Warnings amarillos
- Network requests fallidos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SECCIÃ“N 8: DEPENDENCIAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

```bash
# Verificar dependencias instaladas
npm ls @anthropic-ai/sdk
npm ls @google/generative-ai
npm ls openai
npm ls pg
npm ls express
npm ls multer
npm ls pdf-parse
npm ls bcryptjs
npm ls jsonwebtoken

# Verificar si hay dependencias faltantes
npm ls 2>&1 | grep "UNMET"
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SECCIÃ“N 9: RESUMEN EJECUTIVO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DespuÃ©s de todas las verificaciones, genera este resumen:

## ESTADO GENERAL DEL SISTEMA

### âœ… FUNCIONA CORRECTAMENTE (listo para producciÃ³n)
1. [lista]

### âš ï¸ FUNCIONA PARCIALMENTE (necesita ajustes)
1. [lista con descripciÃ³n de quÃ© falta]

### âŒ NO FUNCIONA (bloqueado)
1. [lista con error especÃ­fico]

### ğŸ”´ NO IMPLEMENTADO (no existe el cÃ³digo)
1. [lista]

### ğŸ”‘ VARIABLES DE ENTORNO FALTANTES
1. [lista]

### ğŸ“¦ DEPENDENCIAS FALTANTES
1. [lista]

## PRIORIDAD DE ARREGLOS

### CRÃTICO (bloquea demos)
1. [quÃ© arreglar primero]

### ALTO (afecta funcionalidad core)
1. [lista]

### MEDIO (mejoras importantes)
1. [lista]

### BAJO (nice to have)
1. [lista]

## ESTIMACIÃ“N DE TRABAJO
- Arreglos crÃ­ticos: X horas
- Arreglos altos: X horas
- Total para 100% operativo: X horas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
INSTRUCCIONES FINALES PARA REPLIT AGENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. EJECUTA TODAS las verificaciones de las secciones 1-8
2. NO OMITAS NADA aunque parezca que funciona
3. SÃ‰ BRUTALMENTE HONESTO - prefiero saber que algo no funciona
4. Si algo da error, muestra el ERROR COMPLETO
5. No digas "deberÃ­a funcionar" - PRUÃ‰BALO y dime si funciona
6. Genera el RESUMEN EJECUTIVO con la verdad absoluta
7. Dame los comandos EXACTOS para arreglar cada problema

QUIERO SABER:
- Â¿Puedo hacer una demo HOY? Si no, Â¿quÃ© falta?
- Â¿QuÃ© porcentaje del sistema estÃ¡ realmente operativo?
- Â¿CuÃ¡les son los 3 problemas mÃ¡s crÃ­ticos?

NO ME DIGAS LO QUE QUIERO ESCUCHAR.
DIME LA VERDAD.
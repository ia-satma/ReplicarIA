---
id: NOM_151
ley: NOM-151-SCFI-2016
titulo: Conservación de mensajes de datos y digitalización de documentos
tags: [conservacion, mensaje_datos, hash, timestamp, probatorio, A2, A7]
prioridad: alta
---

# NOM-151-SCFI-2016 - Conservación de Mensajes de Datos

## [NORMA]

**NOM-151-SCFI-2016** - Requisitos que deben observarse para la conservación 
de mensajes de datos y digitalización de documentos.

### Objetivo:

Establecer los requisitos que deben observarse para la conservación del 
contenido de mensajes de datos y la digitalización de documentos, incluyendo 
los procesos que permitan asegurar que dichos documentos son copia íntegra 
e inalterada de los originales.

### Definiciones clave:

**@NOM151_MSG - Mensaje de datos:**
La información generada, enviada, recibida o archivada por medios electrónicos, 
ópticos o cualquier otra tecnología.

**@NOM151_CONS - Constancia de conservación:**
Documento que acredita que un mensaje de datos ha sido conservado íntegramente 
desde un momento determinado, garantizando que no ha sido alterado.

**@NOM151_INTEG - Integridad:**
La característica de un mensaje de datos que garantiza que la información 
contenida no ha sido modificada desde su creación o última modificación 
autorizada.

**@NOM151_PROB - Valor probatorio:**
La capacidad de un mensaje de datos de servir como prueba en procedimientos 
legales, siempre que cumpla con los requisitos de integridad, atribuibilidad 
y accesibilidad.

---

## [INTERPRETACIÓN REVISAR-IA]

### Uso en la Plataforma:

| Componente | Aplicación de NOM-151 |
|------------|----------------------|
| **Defense Files** | Hash SHA-256 para integridad de eventos |
| **Logs de agentes** | Timestamp para trazabilidad |
| **Documentos** | Cadena de custodia digital |
| **Evidencia** | Conservación con valor probatorio |

### Requisitos para valor probatorio digital:

1. **Integridad**
   - Hash criptográfico (SHA-256 recomendado)
   - Verificación de que no hay alteraciones
   - Cadena de hashes para eventos secuenciales

2. **Atribuibilidad**
   - Identificación del emisor/creador
   - Firma electrónica o digital
   - Registro de usuario que realizó la acción

3. **Accesibilidad**
   - Disponibilidad para consulta
   - Formato legible a largo plazo
   - Capacidad de reproducción

4. **Conservación**
   - Almacenamiento seguro
   - Respaldos periódicos
   - Periodo de retención definido

### Implementación en Revisar.IA:

```python
# Ejemplo de implementación en Defense Files
import hashlib
from datetime import datetime

def generar_hash_evento(evento_data: dict, hash_anterior: str) -> str:
    """Genera hash SHA-256 encadenado para garantizar integridad."""
    contenido = f"{hash_anterior}|{evento_data}|{datetime.utcnow().isoformat()}"
    return hashlib.sha256(contenido.encode()).hexdigest()
```

### Elementos de trazabilidad en logs:

| Campo | Descripción | Cumplimiento NOM-151 |
|-------|-------------|---------------------|
| timestamp | Fecha y hora UTC | Atribuibilidad temporal |
| user_id | Usuario que ejecuta | Atribuibilidad personal |
| action | Acción realizada | Registro de operación |
| hash | SHA-256 del evento | Integridad |
| hash_anterior | Hash del evento previo | Cadena de custodia |

### Uso por Agentes:

| Agente | Aplicación |
|--------|------------|
| **A2 (Bibliotecar.IA)** | Conservación de documentos del acervo |
| **A7 (Auditar.IA)** | Garantía de integridad en Defense Files |
| **Todos** | Logs con valor probatorio |

### En Defense Files:

```
CADENA DE INTEGRIDAD DEL EXPEDIENTE

Evento 1: Creación del expediente
  Hash: a1b2c3d4e5f6...
  Timestamp: 2026-01-15T10:30:00Z

Evento 2: Registro de proveedor
  Hash anterior: a1b2c3d4e5f6...
  Hash actual: f6e5d4c3b2a1...
  Timestamp: 2026-01-15T10:35:00Z

[...]

La cadena de hashes garantiza que ningún evento ha sido 
alterado después de su registro, conforme a los requisitos 
de la NOM-151-SCFI-2016 para conservación de mensajes de datos.
```

---

## Referencias cruzadas

- @TESIS_IA_SCJN (Uso de IA como auxiliar)
- @CFF_29A (Requisitos de CFDI)
- Defense Files (cadena de hashes)
